<!DOCTYPE html><html lang="en"><head>    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <title>电子批记录</title>    <link href="../../static/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">    <link href="../../static/css/bootstrap-datetimepicker.min.css" rel="stylesheet" crossorigin="anonymous">    <link href="../../static/css/base.css" rel="stylesheet">    <script type="text/javascript" src="../../static/js/jquery-3.3.1.min.js"></script>    <script type="text/javascript" src="../../static/js/bootstrap.min.js"></script>    <script type="text/javascript" src="../../static/js/bootstrap-datetimepicker.min.js"></script>    <script type="text/javascript" src="../../static/js/bootbox.min.js"></script>{#    <script type="text/javascript" src="../../static/js/html2canvas.js"></script>#}{#    <script type="text/javascript" src="../../static/js/jsPdf.debug.js"></script>#}    <script type="text/javascript" src="../../static/js/base.js"></script>    <style type="text/css">        .table.noWrapTab td{            white-space:nowrap;            text-align: center;        }        .table .middle-center{            vertical-align: middle;            text-align: center;        }        .table .tdWidth500{            width:500px;        }        .table .tdWidth100{            width:100px;        }        .table .tdMinWidth150{            min-width:150px;        }        .example{            padding:15px;        }        .selectDateTime{            width:100px;        }    </style>    <script type="text/javascript">        $(function(){            //时间选择控件            $.fn.datetimepicker.dates['zh'] = {                days:       ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六","星期日"],                daysShort:  ["日", "一", "二", "三", "四", "五", "六","日"],                daysMin:    ["日", "一", "二", "三", "四", "五", "六","日"],                months:     ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月","十二月"],                monthsShort:  ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],                meridiem:    ["上午", "下午"],                //suffix:      ["st", "nd", "rd", "th"],                today:       "今天"            };            $('.selectDateTime').datetimepicker({                format: 'hh:ii', // 标签上可用data-date-format="hh:ii" data-link-format="hh:ii"                autoclose: true, //选择完成自动关闭下拉框                language: 'zh-CN',                minView: 0,                maxView: 1,                minuteStep:1, //分钟间隔1                startView: 1 //从小时开始选            });            //生产日期            $('.ProDate').datetimepicker({                format: 'yyyy-mm-dd hh:ii',                language: 'zh-CN',                autoclose: true,                minuteStep:1, //分钟间隔1            });            //复选框的全选和反选            $("#allreadycheckbox").on("click",function(){                if (this.checked) {                    $("input[name='readycheckbox']:checkbox").prop("checked", true);                }else{                    $("input[name='readycheckbox']:checkbox").prop("checked", false);                }            })            $("input[name='readycheckbox']:checkbox").on("click",function(){                if($("input[name='readycheckbox']:checkbox").length == $("input[name='readycheckbox']:checkbox:checked").length){                    $("#allreadycheckbox").prop("checked",true)                }else{                    $("#allreadycheckbox").prop("checked",false)                }            })            $("#allovercheckbox").on("click",function(){                if (this.checked) {                    $("input[name='overcheckbox']:checkbox").prop("checked", true);                }else{                    $("input[name='overcheckbox']:checkbox").prop("checked", false);                }            })            $("input[name='overcheckbox']:checkbox").on("click",function(){                if($("input[name='overcheckbox']:checkbox").length == $("input[name='overcheckbox']:checkbox:checked").length){                    $("#allovercheckbox").prop("checked",true)                }else{                    $("#allovercheckbox").prop("checked",false)                }            })        })    </script></head><body>    <div class="example">        <button class="btn btn-primary" id="renderPdf">导出pdf</button>        <button class="btn btn-primary" id="save">保存表单信息</button>    </div>    <div class="col-md-12" id="pdfMain" style="font-size: 14px;padding-top: 20px;background-color: #ffffff;">        {% if isIn(['篮式提取'], title) %}            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">药材名称</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">药材规格</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center ">药材批号</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--生产前确认-->            <h4 class="text-center">生产前确认</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">工序</td>                        <td class="middle-center">篮式提取</td>                        <td class="middle-center">生产日期</td>                        <td class="middle-center tdWidth500">                            <div class="input-group">                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="10" class="middle-center tdWidth100">生产前确认</td>                        <td>准备工作要求及内容</td>                        <td><label class="checkbox-inline"><input type="checkbox" id="allreadycheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1.压缩空气供应正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2.配电柜控制模块开关闭合，供电正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>3.蒸汽主管道及各提取罐前管道的凝水排放干净。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>4.设备各阀门处于生产前状态，开关位置正确。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>5.气动阀运行状态正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>6.循环冷凝水进出口阀门开启。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>7.仪器仪表显示正常</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>8.提取罐、储罐等设备已清洁，无上批物料残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td >9.循环泵运行正常，过滤器内无上异物堵塞。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--提取记录-->            <h4 class="text-center">提取记录</h4>            <table class="table table-bordered noWrapTab">                <tbody>                    <tr>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>罐号</td>                        <td id="_Batch_LS_Action01_1"></td>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>罐号</td>                        <td id="_Batch_LS_Action01_2"></td>                    </tr>                    <tr>                        <td colspan="2">一煎参数</td>                        <td colspan="2">二煎参数</td>                        <td colspan="2">一煎参数</td>                        <td colspan="2">二煎参数</td>                    </tr>                    <tr>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_1"></td>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_2"></td>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_3"></td>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_4"></td>                    </tr>                    <tr>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                    </tr>                    <tr>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_1"></span>至<span id="_Batch_LS_Action04_1"></span></td>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_2"></span>至<span id="_Batch_LS_Action04_2"></span></td>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_3"></span>至<span id="_Batch_LS_Action04_3"></span></td>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_4"></span>至<span id="_Batch_LS_Action04_4"></span></td>                    </tr>                    <tr>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_1"></span>至<span id="_Batch_LS_Action06_1"></span></td>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_2"></span>至<span id="_Batch_LS_Action06_2"></span></td>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_3"></span>至<span id="_Batch_LS_Action06_3"></span></td>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_4"></span>至<span id="_Batch_LS_Action06_4"></span></td>                    </tr>                    <tr>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_1"></td>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_2"></td>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_3"></td>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_4"></td>                    </tr>                    <tr>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered noWrapTab">                <tbody>                    <tr>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>罐号</td>                        <td id="_Batch_LS_Action01_3"></td>                        <td colspan="4">备注</td>                    </tr>                    <tr>                        <td colspan="2">一煎参数</td>                        <td colspan="2">二煎参数</td>                        <td rowspan="8" colspan="4"><textarea class="form-control" rows="15"></textarea></td>                    </tr>                    <tr>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_5"></td>                        <td>加水量</td>                        <td id="_Batch_LS_Action02_6"></td>                    </tr>                    <tr>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                        <td>浸泡</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                    </tr>                    <tr>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_5"></span>至<span id="_Batch_LS_Action04_5"></span></td>                        <td>升温</td>                        <td><span id="_Batch_LS_Action03_6"></span>至<span id="_Batch_LS_Action04_6"></span></td>                    </tr>                    <tr>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_5"></span>至<span id="_Batch_LS_Action06_5"></span></td>                        <td>保温</td>                        <td><span id="_Batch_LS_Action05_6"></span>至<span id="_Batch_LS_Action06_6"></span></td>                    </tr>                    <tr>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_5"></td>                        <td>保温温度</td>                        <td id="_Batch_LS_Action07_6"></td>                    </tr>                    <tr>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--篮式提取清场-->            <h4 class="text-center">篮式提取清场</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">工序</td>                        <td class="middle-center">篮式提取清场</td>                        <td class="middle-center">日期</td>                        <td class="middle-center tdWidth500">                            <div class="input-group">                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="9" class="middle-center tdWidth100">篮式提取清场</td>                        <td>清场要求及内容</td>                        <td><label class="checkbox-inline"><input type="checkbox" id="allovercheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1.篮筐用水清洗至洁净、无药渣残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2.提取罐内壁，用水冲洗内壁，抹布擦至无污垢及药渣残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>3.管道过滤器反冲或拆卸清洗，清洗至内部无药渣残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>4.提取罐外壁用抹布擦拭，至无药液污渍。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>5.药渣清理至前楼出渣间。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>6.地面清洁无药液污渍。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>7.将全部生产用具、设施定置定位，摆放整齐。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>8.收集整理批记录归档至指定存放位置。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>        {% endif %}        {% if isIn(['搅拌提取'], title) %}            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">药材名称</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">药材规格</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">药材批号</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--生产前确认-->            <h4 class="text-center">生产前确认</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">工序</td>                        <td class="middle-center">搅拌提取</td>                        <td class="middle-center">生产日期</td>                        <td class="middle-center tdWidth500">                            <div class="input-group">                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="11" class="middle-center tdWidth100">生产前确认</td>                        <td>准备工作要求及内容</td>                        <td><label class="checkbox-inline"><input type="checkbox" id="allreadycheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1.压缩空气供应正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2.配电柜控制模块开关闭合，供电正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>3.蒸汽主管道及各提取罐前管道的凝水排放干净。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>4.提取罐及管道各阀门处于生产前状态，开关位置正确。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>5.气动阀运行状态正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>6.循环冷凝水进出口阀门开启。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>7.渣液泵机封冷却水阀门开启，水源供应正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>8.仪器仪表显示正常</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>9.提取罐、储罐等设备已清洁，无上批物料残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>10.振荡筛筛网已清洁，无上批遗留物料。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--提取记录-->            <h4 class="text-center">提取记录</h4>            <table class="table table-bordered noWrapTab">                <tbody>                    <tr>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>投料量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td colspan="2">备注</td>                    </tr>                    <tr>                        <td>加水量</td>                        <td id="_Batch_JB_Action02_1"></td>                        <td>加水量</td>                        <td id="_Batch_JB_Action02_2"></td>                        <td>加水量</td>                        <td id="_Batch_JB_Action02_3"></td>                        <td rowspan="6" colspan="2"><textarea class="form-control" rows="9"></textarea></td>                    </tr>                    <tr>                        <td>升温</td>                        <td><span id="_Batch_JB_Action03_1"></span>至<span id="_Batch_JB_Action04_1"></span></td>                        <td>升温</td>                        <td><span id="_Batch_JB_Action03_2"></span>至<span id="_Batch_JB_Action04_2"></span></td>                        <td>升温</td>                        <td><span id="_Batch_JB_Action03_3"></span>至<span id="_Batch_JB_Action04_3"></span></td>                    </tr>                    <tr>                        <td>保温</td>                        <td><span id="_Batch_JB_Action05_1"></span>至<span id="_Batch_JB_Action06_1"></span></td>                        <td>保温</td>                        <td><span id="_Batch_JB_Action05_2"></span>至<span id="_Batch_JB_Action06_2"></span></td>                        <td>保温</td>                        <td><span id="_Batch_JB_Action05_3"></span>至<span id="_Batch_JB_Action06_3"></span></td>                    </tr>                    <tr>                        <td>保温温度</td>                        <td id="_Batch_JB_Action07_1"></td>                        <td>保温温度</td>                        <td id="_Batch_JB_Action07_2"></td>                        <td>保温温度</td>                        <td id="_Batch_JB_Action07_3"></td>                    </tr>                    <tr>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                        <td>出液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">L</div>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--搅拌提取清场-->            <h4 class="text-center">搅拌提取清场</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">工序</td>                        <td class="middle-center">搅拌提取清场</td>                        <td class="middle-center">日期</td>                        <td class="middle-center tdWidth500">                            <div class="input-group">                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="8" class="middle-center tdWidth100">搅拌提取清场</td>                        <td>清场要求及内容</td>                        <td><label class="checkbox-inline"><input type="checkbox" id="allovercheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1. 提取罐内壁，用水冲洗内壁，至无药渣残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2. 提取罐外壁用抹布擦拭，至无药液污渍。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>3. 将振荡筛筛网拆下，用清水及抹布清洗至筛网洁净无药渣残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>4.药渣清理至前楼出渣间。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>5.地面清洁无药液污渍。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>6.将全部生产用具、设施定置定位，摆放整齐。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>7.收集整理批记录归档至指定存放位置。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>        {% endif %}        {% if isIn(['浓缩'], title) %}            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">物料名称</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">批号</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--生产前确认-->            <h4 class="text-center">生产前确认</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">工序</td>                        <td class="middle-center">浓缩</td>                        <td class="middle-center">生产日期</td>                        <td class="middle-center tdWidth500">                            <div class="input-group">                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                                <div class="input-group-addon">至</div>                                <input type="text" class="form-control batchInput datetimepicker ProDate" readonly>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="11" class="middle-center tdWidth100">生产前确认</td>                        <td>准备工作要求及内容</td>                        <td><label class="checkbox-inline"><input type="checkbox" id="allreadycheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1.压缩空气供应正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2.配电柜控制模块开关闭合，供电正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>3.蒸汽管道凝水排放干净。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>4.设备各阀门处于生产前状态，开关位置正确。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>5.气动阀运行状态正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>6.循环冷凝水进出口阀门开启。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>7.仪器仪表显示正常。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>8.浓缩罐已清洁，无上批物料残留。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>9.真空泵冷却水阀门开启，水源供应正常</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                    <tr>                        <td>10.所有阀门处于待生产状态，开关位置正确。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="readycheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>            <!--提取记录-->            <h4 class="text-center">提取记录</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td>浓缩起止时间</td>                        <td class="tdMinWidth150 middle-center"><span id="_Batch_NS_Action01_1"></span>至<span id="_Batch_NS_Action02_1"></span></td>                        <td>提取液量</td>                        <td>                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>罐号</td>                        <td class="tdMinWidth150"><input type="text" class="form-control batchInput" id=""></td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td>时间</td>                        <td>真空度Mpa</td>                        <td>蒸汽压力Mpa</td>                        <td>温度℃</td>                        <td>时间</td>                        <td>真空度Mpa</td>                        <td>蒸汽压力Mpa</td>                        <td>温度℃</td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                    <tr>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                        <td><input type="text" class="form-control batchInput" id=""></td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td>浓缩液量</td>                        <td class="tdMinWidth150">                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">kg</div>                            </div>                        </td>                        <td>浓缩液密度</td>                        <td class="tdMinWidth150">                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                            </div>                        </td>                        <td>浓缩液温度</td>                        <td class="tdMinWidth150">                            <div class="input-group">                                <input type="text" class="form-control batchInput" id="">                                <div class="input-group-addon">°C</div>                            </div>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">备注</td>                        <td><textarea class="form-control" rows="3"></textarea></td>                    </tr>                </tbody>            </table>            <!--浓缩清场-->            <h4 class="text-center">浓缩清场</h4>            <table class="table table-bordered">                <tbody>                    <tr>                        <td rowspan="3" class="middle-center tdWidth100">浓缩清场</td>                        <td>清场要求及内容</td>                        <td class="tdMinWidth150"><label class="checkbox-inline"><input type="checkbox" id="allovercheckbox"> 打√全选</label></td>                    </tr>                    <tr>                        <td>1.将提取液储罐用水冲洗至洁净无污渍。</td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    <tr>                        <td>2.将浓缩罐内用清水冲洗至无药液颜色或变浅，然后开启真空及加热，由储罐进水，浓缩煮罐至少30分钟，至浓缩罐内列管无药垢，放出清洗水无颜色无药渣为止。                            备注：必要时应加入弱碱进行煮罐                        </td>                        <td>                            <label class="checkbox-inline"><input type="checkbox" name="overcheckbox"> 是 / 否</label>                        </td>                    </tr>                </tbody>            </table>            <table class="table table-bordered">                <tbody>                    <tr>                        <td class="middle-center">操作人</td>                        <td class="middle-center tdMinWidth150"></td>                        <td class="middle-center">检查人</td>                        <td class="middle-center tdMinWidth150"></td>                    </tr>                </tbody>            </table>        {% endif %}    </div>    <script>        $(function(){            var dialog = bootbox.dialog({                message: '<p class="text-center mb-0"><i class="fa fa-spin fa-cog"></i> 稍等一下，正在加载数据...</p>',                closeButton: false            });            //数据采集            $.ajax({                url: '/BatchSearch',                method: 'GET',                data: {                    BatchID: getUrlParam('BatchID'),                    PUID: getUrlParam('title')                },                success: function (response) {                    dialog.modal('hide');                    response = JSON.parse(response)                    for(var key in response){                        adddata(key,response[key])                    }                },                error: function () {                    dialog.modal('hide');                    bootbox.alert("请求数据失败，请稍后重试！")                }             });            //表单数据插入            $.ajax({                url: '/allUnitDataMutual',                method: 'get',                data: {                    BatchID: getUrlParam('BatchID'),                    PUID: getUrlParam('title')                },                beforeSend:function(){                    dialog.modal('show');                },                success: function (response) {                    dialog.modal('hide');                    response = JSON.parse(response)                    for(var key in response){                        addInputData(key,response[key])                    }                },                error: function () {                    dialog.modal('hide');                    bootbox.alert("请求失败，请稍后重试！")                }             });            //导出PDF            $("#renderPdf").on('click',function(){                var pdfMain = $("#pdfMain")                html2canvas(pdfMain, {                  onrendered:function(canvas) {                      var contentWidth = canvas.width;                      var contentHeight = canvas.height;                      //一页pdf显示html页面生成的canvas高度;                      var pageHeight = contentWidth / 595.28 * 841.89;                      //未生成pdf的html页面高度                      var leftHeight = contentHeight;                      //pdf页面偏移                      var position = 0;                      //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高                      var imgWidth = 555.28;                      var imgHeight = 555.28/contentWidth * contentHeight;                      var pageData = canvas.toDataURL('image/jpeg', 1.0);                      var pdf = new jsPDF('', 'pt', 'a4');                      //有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)                      //当内容未超过pdf一页显示的范围，无需分页                      if (leftHeight < pageHeight) {                          pdf.addImage(pageData, 'JPEG', 20, 0, imgWidth, imgHeight );                      } else {                          while(leftHeight > 0) {                              pdf.addImage(pageData, 'JPEG', 20, position, imgWidth, imgHeight)                              leftHeight -= pageHeight;                              position -= 841.89;                              //避免添加空白页                              if(leftHeight > 0) {                                  pdf.addPage();                              }                          }                      }                      pdf.save('电子批记录html to pdf.pdf');                  }              })            })            //保存输入的表单信息            $("#save").on('click',function(){                $.ajax({                    url: '/allUnitDataMutual',                    method: 'POST',                    data: {                        BatchID: getUrlParam('BatchID'),                        PUID: getUrlParam('title'),                    },                    beforeSend:function(){                        dialog.modal('show');                    },                    success: function (data) {                        dialog.modal('hide');                        if (data == "OK") {                            window.location.reload();                        } else {                            bootbox.alert(data)                        }                    },                    error: function () {                        dialog.modal('hide');                        bootbox.alert("请求失败，请稍后重试！")                    }                });            })        })    </script></body></html>