<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>北康数据采集系统</title>
    <link href="../../static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/jquery.scrollbar.min.css" rel="stylesheet" type="text/css">
    <link href="../../static/css/admin.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../../static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="../../static/js/popper.min.js"></script>
    <script type="text/javascript" src="../../static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../static/js/jquery.scrollbar.min.js"></script>
    <script type="text/javascript" src="../../static/js/admin.js"></script>
</head>
<body style="height: auto;min-height: 100%;">
    <div class="wrapper">
        <header>
            <nav class="navBar">
                <div class="navLogo">
                    <img src="../../static/images/logo_white.png" alt="logo">
                </div>
                <div class="navUser">
                    <div class="navUserName">{{ current_user['Name']}}闵子文</div>
                    <i class="glyphicon glyphicon-menu-down"></i>
                    <div class="navUserPanel">
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href="javascript:;">用户信息</a></li>
                            <li><a href="/logout">退出</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <aside class="contentSider">
            <section class="sidebar">
                <div class="menuTitle">
                    <span>导航菜单</span>
                    <span class="glyphicon glyphicon-indent-right pull-right indentMenu"></span>
                </div>
                <ul class="sidebarNav">
                    <li>
                        <a href="javascript:;" class="rootMenu">
                            <span class="glyphicon glyphicon-edit pull-left"></span>
                            <span>生产数据管理</span>
                            <span class="glyphicon glyphicon-menu-left pull-right"></span>
                        </a>
                        <ul class="treeMenu">
                            <li>
                                <a href="#" class="addTabLink" data-href="/ElectronicBatchRecordNav">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">电子批记录</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;" class="rootMenu">
                            <span class="glyphicon glyphicon-stats pull-left"></span>
                            <span>过程质量分析</span>
                            <span class="glyphicon glyphicon-menu-left pull-right"></span>
                        </a>
                        <ul class="treeMenu">
                            <li>
                                <a href="#" class="addTabLink" data-href="/ProcessContinuousData">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">过程连续数据</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;" class="rootMenu">
                            <span class="glyphicon glyphicon-cog pull-left"></span>
                            <span>系统管理</span>
                            <span class="glyphicon glyphicon-menu-left pull-right"></span>
                        </a>
                        <ul class="treeMenu">
                            <li>
                                <a href="#" class="addTabLink" data-href="/organization">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">组织结构</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="addTabLink" data-href="/sysrole">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">角色管理</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="addTabLink" data-href="/user_manage/default">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">用户管理</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="addTabLink" data-href="/roleright">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">权限分配</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="addTabLink" data-href="/syslogs">
                                    <span class="glyphicon glyphicon-menu-right"></span>
                                    <span class="linkName">系统日志</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </section>
        </aside>
        <div class="content">
            <section>
                <div class="row">
                    <div class="col-md-12">
                        <div class="nth-tabs" id="editor-tabs"></div>
                    </div>
                </div>
            </section>
        </div>
    </div>
    <script type="text/javascript">
		var nthTabs;
        $(function () {
            nthTabs = $("#editor-tabs").nthTabs();
            nthTabs.addTab({
                id:'a',
                title:'首页',
				active:true,
				allowClose:false,
                content:'<iframe class="page-iframe" src="/home/workbench" frameborder="no" border="no" height="100%" width="100%"></iframe>',
            }).setActTab("#a");

            //右上角用户信息
            $(".navUser").mouseover(function() {
                $(this).find(".navUserPanel").css("display", "block")
            }).mouseout(function (){
                $(this).find(".navUserPanel").css("display","none")
            })

            //装选项卡内容的高度设置
            $(window).resize(function () {
                $(".tab-content").css("height",$(document).innerHeight() - 95)
            }).resize();

            //左侧菜单
            //下拉折叠
            $(".sidebarNav li .rootMenu").on('click',function(){
                if($(this).siblings(".treeMenu").addClass("transtion").css("display") == "none"){
                    $(this).siblings(".treeMenu").slideDown()
                    $(this).parent().siblings().find(".treeMenu").slideUp()
                    $(this).find(".pull-right").css("transform","rotate(-90deg)")
                    $(this).parent().siblings().find(".pull-right").css("transform","rotate(0)")
                }else{
                    $(this).siblings(".treeMenu").slideUp()
                    $(this).find(".pull-right").css("transform","rotate(0)")
                }
            })
            //增加到选项卡
            $(".addTabLink").on('click',function(e){
                e.stopPropagation()
                var url = $(this).attr("data-href")
                var title = $(this).find(".linkName").html()
                var index = $(".addTabLink").index(this)
                nthTabs.addTab({
                    id:"a"+index,
                    title:title,
                    content:'<iframe class="page-iframe" src="'+ url +'" frameborder="no" border="no" height="100%" width="100%"></iframe>',
                }).setActTab("a"+index).locationTab()
            })
            //左右折叠导航
            $(".indentMenu").on('click',function(){
                if($(".contentSider").css("left") == "0px"){
                    $(this).removeClass("glyphicon-indent-right").addClass("glyphicon-indent-left")
                    $(".contentSider").animate({left:"-180px"})
                    $(".content").animate({left:"40px"})
                    $(".sidebarNav").fadeOut()
                }else{
                    $(this).removeClass("glyphicon-indent-left").addClass("glyphicon-indent-right")
                    $(".contentSider").animate({left:"0"})
                    $(".content").animate({left:"220px"})
                    $(".sidebarNav").fadeIn()
                }
            })
        });
    </script>
</body>
</html>
